dnl Tests for the <regex.h> include-file, and the functions associated with it.
AC_DEFUN([CF_REGEX_H_FUNCS],
[
AC_MSG_CHECKING(regcomp/regexec functions)
AC_CACHE_VAL(cf_cv_REGEX_H,[
	AC_TRY_RUN([
#include <sys/types.h>
#include <regex.h>
		int main() {
			regex_t e;
			char *p = "foo";
			char *s = "foobar";
			if (regcomp(&e, p, 0) != 0
			 || regexec(&e, s, 0, (regmatch_t*)0, 0) < 0)
		 		exit(1);
			regfree(&e);
			exit(0);
		} ],
		[cf_cv_REGEX_H=yes],
		[cf_cv_REGEX_H=no],
		[cf_cv_REGEX_H=unknown])
	])
AC_MSG_RESULT($cf_cv_REGEX_H)
test $cf_cv_REGEX_H = yes && AC_DEFINE(HAVE_REGEX_H_FUNCS)
])dnl
