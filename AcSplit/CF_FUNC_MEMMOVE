dnl Check for memmove, or a bcopy that can handle overlapping copy.  If neither
dnl is found, add our own version of memmove to the list of objects.
AC_DEFUN([CF_FUNC_MEMMOVE],
[
if test ".$ac_cv_func_memmove" != .yes ; then
	if test $ac_cv_func_bcopy = yes ; then
		AC_MSG_CHECKING(if bcopy does overlapping moves)
		AC_CACHE_VAL(cf_cv_good_bcopy,[
			AC_TRY_RUN([
int main() {
	static char data[] = "abcdefghijklmnopqrstuwwxyz";
	char temp[40];
	bcopy(data, temp, sizeof(data));
	bcopy(temp+10, temp, 15);
	bcopy(temp+5, temp+15, 10);
	exit (strcmp(temp, "klmnopqrstuwwxypqrstuwwxyz"));
}
		],
		[cf_cv_good_bcopy=yes],
		[cf_cv_good_bcopy=no],
		[cf_cv_good_bcopy=unknown])
		])
		AC_MSG_RESULT($cf_cv_good_bcopy)
	else
		cf_cv_good_bcopy=no
	fi
	if test $cf_cv_good_bcopy = yes ; then
		AC_DEFINE(USE_OK_BCOPY)
	else
		AC_DEFINE(USE_MY_MEMMOVE)
	fi
fi
])dnl
