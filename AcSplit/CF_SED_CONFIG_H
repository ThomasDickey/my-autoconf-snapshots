dnl This bypasses the normal autoconf process because we're generating an
dnl arbitrary number of NEED_xxxx definitions with the CF_HAVE_FUNCS macro. 
dnl Rather than populate an aclocal.h file with all of those definitions, we do
dnl it here.
dnl
dnl Parameters:
dnl $1 = input, which configure has done substitutions upon
dnl $2 = target file
dnl
AC_DEFUN([CF_SED_CONFIG_H],[
changequote({,})dnl
{
cf_config_h=conf$$
rm -f $cf_config_h
echo '/* generated by configure-script */' >$cf_config_h
grep -v '^ -D' config_h >>$cf_config_h
sed	-e '/^ -D/!d' \
	-e '/^# /d' \
	-e 's/ -D/\
#define /g' \
	-e 's/\(#define [A-Za-z_][A-Za-z0-9_]*\)=/\1	/g' \
	-e 's@\\@@g' \
	$1 | sort >>$cf_config_h
}
changequote([,])dnl
CF_OUTPUT_IF_CHANGED($cf_config_h,$2)
rm -f $cf_config_h
])dnl
