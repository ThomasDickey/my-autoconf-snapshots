dnl The Debian people have their own naming convention for manpages.  This
dnl option lets us override the name of the file containing renaming, or
dnl disable it altogether.
AC_DEFUN([CF_MANPAGE_RENAMES],
[
AC_MSG_CHECKING(for manpage renaming)

AC_ARG_WITH(manpage-renames,
	[  --with-manpage-renames  specify manpage-renaming],
	[cf_manpage_renames=$withval],
	[cf_manpage_renames=yes])

case ".$cf_manpage_renames" in #(vi
.no) #(vi
  ;;
.|.yes)
  # Debian 'man' program?
  if test -f /etc/debian_version ; then
    cf_manpage_renames=`cd $srcdir && pwd`/man/man_db.renames
  else
    cf_manpage_renames=no
  fi
  ;;
esac

if test "$cf_manpage_renames" != no ; then
  if test ! -f $cf_manpage_renames ; then
    AC_MSG_ERROR(not a filename: $cf_manpage_renames)
  fi

  test ! -d man && mkdir man

  # Construct a sed-script to perform renaming within man-pages
  if test -n "$cf_manpage_renames" ; then
    test ! -d man && mkdir man
    sh $srcdir/man/make_sed.sh $cf_manpage_renames >man/edit_man.sed
  fi
fi

AC_MSG_RESULT($cf_manpage_renames)
])dnl
