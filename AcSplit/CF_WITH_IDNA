dnl CF_WITH_IDNA version: 3 updated: 2010/03/28 12:52:50
dnl ------------
dnl Check for libidn, use it if found.
dnl
dnl $1 = optional path for headers/library
AC_DEFUN([CF_WITH_IDNA],[
  CF_ADD_OPTIONAL_PATH($1)

  CF_FIND_LINKAGE([
#include <stdio.h>
#include <idna.h>
],[
	char *output = 0;
    int code = idna_to_ascii_8z("name", &output, IDNA_USE_STD3_ASCII_RULES);
],idn,[
	AC_DEFINE(USE_IDNA)
	CF_ADD_INCDIR($cf_cv_header_path_idn)
	CF_ADD_LIBDIR($cf_cv_library_path_idn)
	LIBS="-lidn $LIBS"
])
])dnl
